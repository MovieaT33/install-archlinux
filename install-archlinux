#!/bin/bash

EXPECTED_UEFI_BITNESS=64
DEVICE=/dev/vda

loadkeys us

# setfont ter-132b

if [[ $(cat /sys/firmware/efi/fw_platform_size) -ne $EXPECTED_UEFI_BITNESS ]]; then
	echo "Unsupported UEFI mode"
	exit 1
fi

if ! ping -c 1 archlinux.com > /dev/null; then
	echo "No internet connection"
	exit 1
fi

fdisk $DEVICE <<EOF
g
n
1

+1G
t
EFI System
n
2


t
2
Linux LVM
wq
EOF
